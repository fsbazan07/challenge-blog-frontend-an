<div class="grid gap-10 lg:grid-cols-[1fr_320px]">
  <article class="min-w-0">
    <div class="flex items-center justify-between">
      <a [routerLink]="['/feed']">
        <app-button variant="secondary">← Volver</app-button>
      </a>
    </div>

    <header class="mt-6 space-y-3">
      <h1 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground">
        {{ post.title }}
      </h1>

      <div class="text-sm text-muted-foreground">
        <span>{{ authorName ? 'Por ' + authorName : '—' }}</span>
        @if (post.created_at) {
          <span class="mx-2">•</span>
        }
        <span>{{ formatAR(post.created_at) }}</span>
      </div>

      @if (post.excerpt) {
        <p class="text-base sm:text-md text-muted-foreground leading-relaxed">
          {{ post.excerpt }}
        </p>
      }

      @if (post.tags.length) {
        <div class="flex flex-wrap gap-2 pt-1">
          @for (t of post.tags.slice(0, 8); track t) {
            <span class="rounded-full bg-accent px-3 py-1 text-xs text-accent-foreground">
              #{{ t }}
            </span>
          }
        </div>
      }
    </header>

    @if (cover) {
      <div class="mt-6 overflow-hidden rounded-2xl border border-border bg-muted">
        <img
          [src]="cover"
          alt=""
          loading="lazy"
          decoding="async"
          class="h-70 w-full object-cover sm:h-90"
        />
      </div>
    }

    <section class="mt-6">
      <div class="whitespace-pre-wrap text-foreground/90 leading-relaxed text-base">
        {{ post.content ?? '' }}
      </div>
    </section>
  </article>

  <aside class="space-y-6 flex flex-col sm:gap-8 md:gap-0">
    <div class="rounded-2xl border border-border bg-card p-5 shadow-sm dark:shadow-black/20">
      <h3 class="text-sm font-semibold text-foreground">Tags en este post</h3>

      <div class="mt-3 flex flex-wrap gap-2">
        @if (post.tags.length) {
          @for (t of post.tags.slice(0, 10); track t) {
            <span class="rounded-full bg-accent px-3 py-1 text-xs text-accent-foreground">
              #{{ t }}
            </span>
          }
        } @else {
          <span class="text-sm text-muted-foreground">Sin tags</span>
        }
      </div>
    </div>

    <div class="rounded-2xl border border-border bg-card p-5 shadow-sm dark:shadow-black/20">
      <h3 class="text-sm font-semibold text-foreground">
        ¡Te invitamos a crear tus propios posts!
      </h3>

      <div class="mt-4">
        <a [routerLink]="['/myposts/new']" class="block">
          <app-button variant="primary" class="w-full">Nuevo post</app-button>
        </a>
      </div>
    </div>
  </aside>
</div>
